---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const recipes = await getCollection('dishes');
  return recipes.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.id.split('/').pop()?.replace('.md', '') || 'Receta'}>
  <div class="max-w-4xl mx-auto bg-surface border border-gray-800 rounded-none relative overflow-hidden">
    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary via-secondary to-accent"></div>
    
    <div class="p-8">
      <div class="flex justify-between items-center mb-8 border-b border-gray-800 pb-4">
        <a href="javascript:history.back()" class="inline-flex items-center text-primary hover:text-white transition-colors font-mono text-xs uppercase tracking-widest border border-primary/30 px-4 py-2 hover:bg-primary/10 group">
          <span class="mr-2 group-hover:-translate-x-1 transition-transform">←</span> SYSTEM.BACK
        </a>
        <span class="font-mono text-xs text-muted uppercase tracking-widest">ID: {entry.slug}</span>
      </div>

      <article class="prose prose-invert prose-lg max-w-none 
        prose-headings:text-primary prose-headings:font-mono prose-headings:uppercase prose-headings:tracking-tight
        prose-p:text-muted prose-p:leading-relaxed
        prose-a:text-secondary hover:prose-a:text-white prose-a:no-underline prose-a:border-b prose-a:border-secondary/50 hover:prose-a:border-white
        prose-strong:text-light prose-strong:font-bold
        prose-code:text-accent prose-code:bg-dark/50 prose-code:px-1 prose-code:py-0.5 prose-code:rounded-none prose-code:font-mono
        prose-img:rounded-none prose-img:border prose-img:border-gray-800 prose-img:shadow-none
        prose-li:text-muted prose-li:marker:text-primary">
        <Content />
      </article>
      
      <div class="mt-12 pt-8 border-t border-gray-800 flex justify-between items-center text-xs font-mono text-muted uppercase">
        <span>End of File</span>
        <span class="text-accent">●</span>
      </div>
    </div>
  </div>
</Layout>
